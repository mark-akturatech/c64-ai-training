# 6502 Illegal Opcodes and Undocumented Instructions

          "Illegal" Opcodes and Undocumented Instructions
                  The following instructions are undocumented are not guaranteed to work.
                  Some are highly unstable, some may even start two asynchronous threads
                  competing in race condition with the winner determined by such miniscule
                  factors as temperature or minor differences in the production series, at other
                  times, the outcome depends on the exact values involved and the chip series.
                                                                  6502 Instruction Set
                 Use with care and at your own risk.
                 Please mind that this section applies to the original NMOS version of the 6502
                 by MOS Technology (and its variants, like the 6507 or 6510) only, but not to
                 the later CMOS versions, like the W65C02S by Western Design Center (WDC). The
                 latter either use these opcodes to implement extensions to the standard NMOS
                 instruction set or will execute a NOP for any instruction codes still
                 undefined.
                 There are several mnemonics for various opcodes. Here, they are (mostly) the
                 same as those used by the ACME and DASM assemblers with known synonyms provided
                 in parentheses:
                     ALR (ASR)
                     ANC
                     ANC (ANC2)
                     ANE (XAA)
                     ARR
                     DCP (DCM)
                     ISC (ISB, INS)
                     LAS (LAR)
                     LAX
                     LXA (LAX immediate)
                     RLA
                     RRA
                     SAX (AXS, AAX)
                     SBX (AXS, SAX)
                     SHA (AHX, AXA)
                     SHX (A11, SXA, XAS)
                     SHY (A11, SYA, SAY)
                     SLO (ASO)
                     SRE (LSE)
                     TAS (XAS, SHS)
                     USBC (SBC)
                     NOPs (including DOP, TOP)
                     JAM (KIL, HLT)
                 "Illegal" Opcodes in Details
                 Legend to markers used in the instruction details:
                  *   add 1 to cycles if page boundary is crossed
                  †   unstable
                  ††  highly unstable
                 ALR (ASR)
                                                                6502 Instruction Set
                      AND oper + LSR
                      A AND oper, 0 -> [76543210] -> C
                                                         N Z C I D V
                                                         + + + - - -
                      addressing     assembler       opc bytes cycles
                      immediate      ALR #oper        4B   2      2
                 ANC
                      AND oper + set C as ASL
                      A AND oper, bit(7) -> C
                                                         N Z C I D V
                                                         + + + - - -
                      addressing     assembler       opc bytes cycles
                      immediate      ANC #oper        0B   2      2
                 ANC (ANC2)
                      AND oper + set C as ROL
                      effectively the same as instr. 0B
                      A AND oper, bit(7) -> C
                                                         N Z C I D V
                                                         + + + - - -
                      addressing     assembler       opc bytes cycles
                      immediate      ANC #oper        2B   2      2
                 ANE (XAA)
                      * OR X + AND oper
                      Highly unstable, do not use.
                      A base value in A is determined based on the contets of A
                      and a constant, which may be typically $00, $ff, $ee, etc.
                      The value of this constant depends on temerature, the chip
                      series, and maybe other factors, as well.
                      In order to eliminate these uncertaincies from the
                      equation, use either 0 as the operand or a value of $FF in
                      the accumulator.
                      (A OR CONST) AND X AND oper -> A
                                                         N Z C I D V
                                                         + + - - - -
                      addressing     assembler       opc bytes cycles
                      immediate      ANE #oper        8B   2      2   ††
                 ARR
                      AND oper + ROR
                                                                6502 Instruction Set
                      This operation involves the adder:
                      V-flag is set according to (A AND oper) + oper
                      The carry is not set, but bit 7 (sign) is exchanged with
                      the carry
                      A AND oper, C -> [76543210] -> C
                                                         N Z C I D V
                                                         + + + - - +
                      addressing     assembler       opc bytes cycles
                      immediate      ARR #oper        6B   2      2
                 DCP (DCM)
                      DEC oper + CMP oper
                      M - 1 -> M, A - M
                      Decrements the operand and then compares the result to the
                      accumulator.
                                                         N Z C I D V
                                                         + + + - - -
                      addressing     assembler       opc bytes cycles
                      zeropage       DCP oper         C7   2      5
                      zeropage,X     DCP oper,X       D7   2      6
                      absolute       DCP oper         CF   3      6
                      absolute,X     DCP oper,X       DF   3      7
                      absolute,Y     DCP oper,Y       DB   3      7
                      (indirect,X)   DCP (oper,X)     C3   2      8
                      (indirect),Y   DCP (oper),Y     D3   2      8
                 ISC (ISB, INS)
                      INC oper + SBC oper
                      M + 1 -> M, A - M - C̅ -> A
                                                         N Z C I D V
                                                         + + + - - +
                      addressing     assembler       opc bytes cycles
