# Disk Utilities (Appendix C) — DISPLAY TRACK & SECTOR, BAM, VIRTUAL DIRECTORY, DISPLAY A CHAIN

**Summary:** This section provides four disk utility programs from Appendix C of the Commodore 64 Programmer's Reference Guide: DISPLAY TRACK & SECTOR, DISPLAY A BLOCK AVAILABILITY MAP (BAM), VIRTUAL DIRECTORY, and DISPLAY A CHAIN. These utilities assist in examining and managing disk data by offering functionalities such as hex dumps of specific disk sectors, visual representations of the BAM, comprehensive directory listings including scratched files, and tracing the sector chain of a file.

**Recommended Utilities and Their Functions**

- **DISPLAY TRACK & SECTOR**
  - Generates hex dumps of any specified track and sector.
  - When output is directed to the screen, it displays half a sector (128 bytes) at a time to prevent scrolling issues: first bytes 0–127 ($00–$7F), then bytes 128–255 ($80–$FF).
  - Can also output the full dump to a printer.
  - The hex dumps in this document were produced using this utility.

- **DISPLAY A BLOCK AVAILABILITY MAP (BAM)**
  - Provides a 2D visual representation of the BAM.
  - Displays diskette name, disk ID, DOS version, and the number of free blocks.

- **VIRTUAL DIRECTORY**
  - Shows the entire directory, including scratched (deleted) files.
  - The default printer/file channel is opened with `OPEN 4,3` in the original listing; change to `OPEN 4,4` to send output to the printer (see Source Code).

- **DISPLAY A CHAIN**
  - Traces the sector chain for a file, displaying linked sectors in order.
  - The chain output can be viewed on-screen or sent to the printer.

**Usage Notes and Behavior**

- Use DISPLAY TRACK & SECTOR for hands-on exploration and verification of raw sector contents.
- The on-screen half-page display of the hex dump prevents loss due to scrolling; printing will produce the complete dump.
- VIRTUAL DIRECTORY can be redirected to a printer by modifying its `OPEN` statement (see Source Code).
- These sample utilities demonstrate programming techniques that are partially explained later in the text; they are provided to aid understanding of disk organization.

## Source Code

```basic
440 REM (VIRTUAL DIRECTORY) -- change to print to printer
440 OPEN 4,3  : REM default (screen/file). To send to printer change to:
440 OPEN 4,4  : REM send directory output to printer
```

## References

- "sample_directory_sector_raw_dump" — expands on hex dumps generated by DISPLAY TRACK & SECTOR
- "directory_block_04_dump_part7_bytes_C0_FF" — expands on example produced by these utilities