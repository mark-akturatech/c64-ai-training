# MOS 6567/6569 (VIC-II) — Memory map as seen by the VIC (banks, Char ROM, Color RAM)

**Summary:** VIC-II has only 14 address lines (16KB view); CIA‑2 Port A bits (inverted PA0/PA1 at $DD00) supply the two high address bits to select one of four 16KB VIC banks. Char ROM appears at VIC addresses $1000‑$1FFF in VIC banks 0 and 2; Color RAM is read via the VIC upper 4 data lines and is addressed by VIC A0‑A9 (available at all banks).

## Memory map as seen by the VIC
The VIC-II chip provides only A0–A13 (14 lines) so the VIC address space is 16KB wide. The two missing high address bits (to reach the full 64KB CPU memory map) are supplied externally by CIA‑2 Port A bits (inverted PA0 and PA1). Those two bits select which 16KB bank the VIC views at any given time, yielding four selectable banks.

Because the VIC lacks the two high bits internally, certain ROMs and RAM regions appear at different CPU addresses but at the same VIC addresses depending on the selected bank. Notably, the character ROM is visible to the VIC at addresses $1000–$1FFF when the VIC bank selection points to the banks that map Char ROM (VIC banks 0 and 2). From the VIC's perspective the Char ROM is therefore always at $1000–$1FFF in those banks even though the CPU sees it at different CPU addresses.

Color RAM is not mapped into the VIC address bus space in the same way as main memory. The VIC has a 12‑bit data bus; the upper 4 data lines are wired to the separate 1‑kB Color RAM. The Color RAM is addressed by the VIC low 10 address lines (A0–A9) and thus is effectively available at every VIC bank and every VIC address where a color nibble is required (it is a parallel 4‑bit read port from the VIC point of view). (CPU view: Color RAM normally appears at $D800–$DBFF.)

(Reference: VIC memory pointer control bits are configured in $D018 — VM/CB bits set VIC memory pointers.)

## Source Code
```text
The VIC has only 14 address lines, so it can only address 16KB of memory.
It can access the complete 64KB main memory all the same because the 2
missing address bits are provided by one of the CIA I/O chips (they are the
inverted bits 0 and 1 of port A of CIA 2). With that you can select one of
4 16KB banks for the VIC at a time.

The (extended) memory map as seen by the VIC looks like this:


 $ffff +----------+   --
       |          |
       |          |
       |          |
       |   RAM    | Bank 3
       |          |
       |          |
       |          |
 $c000 +----------+   --
       |          |
       |   RAM    |
       |          |
 $a000 +----------+ Bank 2
       | Char ROM |
 $9000 +----------+
       |   RAM    |
 $8000 +----------+   --
       |          |
       |          |
       |          |
       |   RAM    | Bank 1
       |          |
       |          |
       |          |
 $4000 +----------+   --
       |          |
       |   RAM    |
       |          |
 $2000 +----------+ Bank 0
       | Char ROM |
 $1000 +----------+
       |   RAM    |
 $0000 +----------+   --


The Char ROM is mapped in at the VIC addresses $1000-$1fff in banks 0 and
2 (it appears at $9000 in the above diagram, but remember that the VIC
doesn't know about the two address bits generated by the CIA. From the
VIC's point of view, the Char ROM is at $1000-$1fff also in bank 2).

The attentive reader will already have noticed that the Color RAM doesn't
appear anywhere. But as explained earlier, the VIC has a 12 bit data bus of
which the upper 4 bits are connected with the Color RAM. Generally
speaking, the sole purpose of the upper 4 bits of the VIC data bus is to
read from the Color RAM. The Color RAM is addressed by the lower 10 bits of
the VIC address bus and is therefore available in all banks at all
addresses.
```

## Key Registers
- $D000-$D02E - VIC-II - VIC registers and control/status (memory pointer bits such as in $D018 select VIC memory pointers)
- $D018 - VIC-II - memory pointers / VM/CB bits (VIC memory bank pointer bits)
- $DD00-$DD0F - CIA‑2 - Port A (CIA2 Port A at $DD00 contains the inverted bits used to select VIC bank; PA0/PA1 provide VIC high address bits)
- $D800-$DBFF - Color RAM (1 KB CPU view; VIC addresses color nibbles via its A0–A9 and upper 4 data lines)

## References
- "memory_map_cpu" — expands on CPU vs VIC differing views of memory layout
- "vic_registers_table" — expands on VM/CB bits in $D018 that set VIC memory pointers

## Labels
- D018
- DD00
- D800
