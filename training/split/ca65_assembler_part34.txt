# CA65 Assembler - Control Commands (.RODATA .SCOPE .SEGMENT .SET .SETCPU .SMART .STRUCT .TAG .UNDEF .UNION .WARNING .WORD .ZEROPAGE)

11.113 .SET
.SET is used to assign a value to a variable. See Numeric variables for a full description.

11.114 .SETCPU
Switch the CPU instruction set. The command is followed by a string that specifies the CPU. Possible values are those that can also be supplied to the --cpu command line option, namely: 6502, 6502X, 6502DTV, 65SC02, 65C02, 65816, 4510, 45GS02, HuC6280 and m740.

See: .CPU, .IFP02, .IFP02X, .IFPDTV, .IFP816, .IFPC02, .IFPM740, .IFPSC02, .P02, .P02X, .P816, .P4510, .P45GS02, .PC02, .PM740, .PSC02

11.115 .SMART
Switch on or off smart mode. The command can be followed by a '+' or '-' character to switch the option on or off respectively. The default is off (that is, the assembler doesn't try to be smart), but this default may be changed by the -s switch on the command line.

In smart mode the assembler will do the following:


Track usage of the REP and SEP instructions in 65816 mode and update the operand sizes accordingly. If the operand of such an instruction cannot be evaluated by the assembler (for example, because the operand is an imported symbol), a warning is issued. Beware: Since the assembler cannot trace the execution flow this may lead to false results in some cases. If in doubt, use the .Inn and .Ann instructions to tell the assembler about the current settings.
In 65816 mode, if the long_jsr_jmp_rts feature is enabled, smart mode will replace a RTS instruction by RTL if it is used within a procedure declared as far, or if the procedure has no explicit address specification, but it is far because of the memory model used.
Example:


        .smart                          ; Be smart
        .smart  -                       ; Stop being smart
  
See: .A16, .A8, .I16, .I8

11.116 .STRUCT
Starts a struct definition. Structs are covered in a separate section named "Structs and unions".

See also: .ENDSTRUCT, .ENDUNION, .UNION

11.117 .TAG
Allocate space for a struct or union. This is equivalent to .RES with the .SIZEOF of a struct.

Example:


        .struct Point
                xcoord  .word
                ycoord  .word
        .endstruct

        .bss
                .tag    Point           ; Allocate 4 bytes
  
See: "Structs and unions"

11.118 .UNDEF, .UNDEFINE
Delete a define style macro definition. The command is followed by an identifier which specifies the name of the macro to delete. Macro replacement is switched of when reading the token following the command (otherwise the macro name would be replaced by its replacement list).

See also the .DEFINE command and section Macros.

11.119 .UNION
Starts a union definition. Unions are covered in a separate section named "Structs and unions".

See also: .ENDSTRUCT, .ENDUNION, .STRUCT

11.120 .WARNING
Force an assembly warning. The assembler will output a warning message preceded by "User warning". This warning will always be output, even if other warnings are disabled with the -W0 command line option.

This command may be used to output possible problems when assembling the source file.

Example:


        .macro  jne     target
                .local L1
                .ifndef target
                .warning "Forward jump in jne, cannot optimize!"
                beq     L1
                jmp     target
        L1:
                .else
                ...
                .endif
        .endmacro
  
See also: .ERROR, .FATAL, .OUT

11.121 .WORD
Define word sized data. Must be followed by a sequence of (word ranged, but not necessarily constant) expressions.

Example:


        .word   $0D00, $AF13, _Clear
  
11.122 .ZEROPAGE
Switch to the ZEROPAGE segment and mark it as direct (zeropage) segment. The name of the ZEROPAGE segment is always "ZEROPAGE", so this is a shortcut for


        .segment  "ZEROPAGE": zeropage
  
Because of the "zeropage" attribute, labels declared in this segment are addressed using direct addressing mode if possible. You must instruct the linker to place this segment somewhere in the address range 0..$FF otherwise you will get errors.

See: .SEGMENT

