# ca65 Users Guide - Documentation for the .MID builtin function: extracts a sublist of tokens from a token list. Syntax: .MID (<int expr>, <int expr>, <token list>). The first argument is the start index (0-based), the second is the count of tokens to extract, and the third is the token list (optionally in curly braces to include terminator-like tokens). Includes an example showing how to detect an immediate addressing '#' token in a macro using .MID and .MATCH. References .LEFT and .RIGHT as related extraction functions.

10.19 .MID
Builtin function. Takes a starting index, a count and a token list as arguments. Will return part of the token list.

Syntax:


        .MID (<int expr>, <int expr>, <token list>)
  
The first integer expression gives the starting token in the list (the first token has index 0). The second integer expression gives the number of tokens to extract from the token list. The third argument is the token list itself. The token list may optionally be enclosed into curly braces. This allows the inclusion of tokens that would otherwise terminate the list (the closing right paren in the given case).

Example:

To check in a macro if the given argument has a '#' as first token (immediate addressing mode), use something like this:


        .macro  ldax    arg
                ...
                .if (.match (.mid (0, 1, {arg}), #))

                ; ldax called with immediate operand
                ...

                .endif
                ...
        .endmacro
  
See also the .LEFT and .RIGHT builtin functions.


---
Additional information can be found by searching:
- "right_token_list" which expands on related function to extract the right part of a token list (.RIGHT)
