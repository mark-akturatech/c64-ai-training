# 6502 WDC 65C02 - BRA, PHX, PHY, PLX, PLY, STZ, TRB, TSB

                 STZ  Store Zero in Memory
                      0 -> M                              N Z C I D V
                                                          - - - - - -
                      addressing     assembler       opc bytes cycles
                      zeropage       STZ oper         64   2      3
                      zeropage,X     STZ oper,X       74   2      4
                      absolute       STZ oper         9C   3      4
                      absolute,X     STZ oper,X       9E   3      4*
                 TRB  Test and Reset Memory Bit***
                      This instruction first ANDs the contents of the given
                      memory location with the contents of the accumulator (A)
                      and sets the Z flag accordingly to the result, much
                      like the BIT instruction. Then, the contents of the
                      memory location is ANDed with the compliment of the
                      mask in A, and then written back, thus clearing the
                      bit(s) set in A.
                      In other words, TRB clears the bits set in A in the
                      specified location and sets Z, if any of these bits
                      were set, otherwise resetting Z.
                                                                   6502 Instruction Set
                      A AND M -> Z, Â¬A AND M -> M         N Z C I D V
                                                          - + - - - -
                      addressing     assembler       opc bytes cycles
                      absolute       TRB oper         1C   3      6
                      zeropage       TRB oper         14   2      5
                 TSB  Test and Set Memory Bit***
                      Similar to TRB, but sets the bits according to the bit
                      mask in A.
                      TSB sets the bits set in A in the specified location
                      and sets Z, if any of these bits were previously set,
                      otherwise resetting Z.
                      A AND M -> Z, A OR M -> M           N Z C I D V
                                                          - + - - - -
                      addressing     assembler       opc bytes cycles
                      absolute       TRB oper         0C   3      6
                      zeropage       TRB oper         04   2      5
                 WAI  Wait for Interrupt
                      Stops and pulls the signal on pin RDY to low.
                      The processor goes into a low-power mode,
                      similar to STP, until an IRQ or NMI signal is
                      encountered to "wake it up" again.
                      stop and wait for sIRQ/sNMI         N Z C I D V
                                                          - - - - - -
                      addressing     assembler       opc bytes cycles
                      implied        WAI              CB   1      3
                  *   add 1 to cycles if page boundary is crossed
                  **  add 1 to cycles if branch occurs on same page
                      add 2 to cycles if branch occurs to different page
                  *** Instructions for bit manipulation not present on the G65SC02.
                      Early versions of the W65C02 implement TRB and TSB only.
                      Instructions BBR, BBS, RMB and SMB on the W65C02S are as on
                      the Rockwell R6500/11/12/15 family.
                 Additional NOPs, "Reserved for Future Use" (W65C02)
                 There are no undefined opcodes on the W65C02.
                 Opcodes not in use are marked as "reserved for future use" and execute
                 as NOPs. These additional NOPs come at various byte sizes and cycle
                 times, here listed by their respective instruction codes (W65C02S):
                   NOP 1 byte, 1 cycle:
                                                                  6502 Instruction Set
                   03, 13, 23, 33, 43, 53, 63, 73,
                   83, 93, A3, B3, C3, D3, E3, F3,
                   0B, 1B, 2B, 3B, 4B, 5B, 6B, 7B,
                   8B, 9B, AB, BB, EB, FB
                   NOP 2 bytes, 2 cycles:
                   02, 22, 42, 62, 82, C2, E2
                   NOP 2 bytes, 3 cycles:
                   44
                   NOP 2 bytes, 4 cycles:
                   54, F4, F4
                   NOP 3 bytes, 4 cycles:
                   DC, FC
                   NOP 3 bytes, 8 cycles:
                   5C
                 Modified Cycle Times (W65C02)
                   Cycle Penalty for BCD Arithmetics
                   For instructions ADC and SBC, the negative flag (N), the overflow flag (V)
                   and the zero flag (Z) are now set correctly for decimal mode. However, this
                   comes at the general cost of an extra cycle for these instructions, for any
                   BCD arithmetics.
                   Add 1 to any cycle times stated if the processor is currently in decimal
                   mode (D flag = 1).
                   Read-Modify-Write Instructions with Absolute Indexed Addresses
                   execute in one cycle less when remaining at the same memory page.
                   Indirect Jumps on Page Boundaries
                   Indirect JMP instructions with a look-up address low-byte of $FF (as in
                   $11FF) now execute as expected, but there's an extra cycle added to the
                   exuction time when address bytes are on different memory pages.
                 Behavioral Changes
                   Modified reset and interrupt sequence: the decimal flag is now reset (D=0)
                   and the processor set to binary mode.
                                                                  6502 Instruction Set
                   No undefinded opcodes (all unused instruction codes execute as NOPs,
                   instead).
                   For ADC and SBC N, V, and Z flags are set correctly in decimal mode, but
                   there is now an extra 1-cycle penalty for decimal mode with certain
                   instructions.
                   Indexed addressing across page boundaries now results in an extra read of
                   the last instruction byte, instead of the extra read of an invalid address
                   (NMOS).
                   Indirect jumps, fetching the address from the last byte of a page now fetch
                   the high-byte correctly from the next page. (E.g., "JMP ($11FF)" will fetch
                   the low-byte of the effective address from $11FF and the high-byte from
                   $1200. The NMOS version didn't increment the high-byte of the fetch address
                   in these cases.) An extra cycle is added in these cases.
                   Read-modify-write instructions do not write back the initial value to the
                   address (as with the NMOS 6502), but perform a dummy read instead. So there
                   are now two read cycles and one write cycle, while there were two write and
                   one read cycle on the NMOS 6502. (Caveat: for indexed addressing, this dummy
                   read is performed on the base address before indexing.)
                   Read-modify-write instructions with absolute indexed addresses that do not
                   cross page boundaries perform now in one cycle less (6 instead of 7 on the
                   NMOS CPU).
                   BRK instruction are fully executed before any interrupt. (On the NMOS
                   version, if an interrupt occured while a BRK instruction was fetching the
                   interupt vector, this would be overwritten and the interrupt executed,
                   instead.)
                   The signal on the RDY pin is now bidrectional. While it was just an input on
                   the NMOS version, it is now also pulled low by the WAI instruction.
