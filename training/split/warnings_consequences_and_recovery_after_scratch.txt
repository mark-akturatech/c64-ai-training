# byRiclianll - Strongly warns never to scratch an unclosed file because aborted writes leave the disk's internal organization (BAM) inconsistent with file contents; further writes can overwrite active files and cause overlapping files and a 'poisoned' disk. Advises using the DOS validate command when in doubt. Explains that scratch does not physically erase data but frees sectors and zeroes the file-type byte in the directory; if you inadvertently scratch a file, stop and do not write to the disk â€” recovery is possible if you avoid subsequent writes. Points to Chapter 8 for detailed recovery steps.


Whatever  the  cause,  an  unclosed  file  should  never  be  scratched!  Since  the  write  opera- 
tion was  aborted,  the  internal  organization  of  the  diskette  (i.e.,  the  BAM),  has  been  left 
in  disarray.  It  does  not  match  the  actual  file  contents  of  the  diskette.  Any  further  at- 
tempt to  write  to  that  diskette  will  probably  cause  a  loss  of  one  or  more  files.  Files  can 
actually  overlap  one  another  now  and  you  will  be  left  vdth  a  poisoned  diskette.  The  DOS 
does  have  a  command  to  decorrupt  itself.  This  is  the  validate  command.  When  in  doubt, 
validate  your  diskette! 

The  scratch  command  does  not  actually  erase  the  file  on  your  diskette.  Rather  it  traces 
the  file  across  the  surface  of  the  diskette  and  frees  any  sectors  the  file  occupied.  The 
file-type  byte  is  also  changed  to  a  zero  in  the  directory  which  indicates  to  the  DOS  that 
it  is  no  longer  active.  // you  inadvertently  scratch  a  file  that  you  didn't  mean  to,  stop 
right  then  and  there!  You  can  recover  it.  Do  not  attempt  to  write  to  the  diskette.  The 
sectors  just  freed  will  be  used  on  subsequent  writes  to  the  diskette.  Once  you  write 
to  the  diskette,  recovery  is  impossible.  Chapter  8  on  Getting  Out  of  Trouble  shows  you 
how  to  recover  a  scratched  file. 


---
Additional information can be found by searching:
- "unclosed_file_definition_and_common_causes" which expands on lists the causes of unclosed files referenced here
- "scratch_command_overview_and_basic_syntax" which expands on contains the core scratch syntax and examples
