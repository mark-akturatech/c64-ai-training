# byRiclianll - Section 3.2: Each sector contains a header block (identifying the sector) followed by a data block (256 bytes). Sectors are separated by inter-record gaps and each block begins with a SYNC MARK (10+ ones, typically 40) to signal start of header/data block. Header blocks are written only during formatting; data blocks are rewritten when data is recorded.

3.2  Layout  of  a  Sector 


During  the  formatting  (newing)  process,  the  DOS  creates  and  records  onto  the  diskette 
all  683  sectors/blocks  that  will  eventually  be  used  for  storing  information.  Each  sector 
is  comprised  of  two  parts: 

1.  A  header  block  that  identifies  the  sector. 

2.  A  data  block  that  holds  the  256  bytes  of  data. 

The  diagram  below  illustrates  how  these  parts  are  arranged. 


SECTOR  #0 


SECTOR  #1 


SECTOR  #2 


I 


I 


HEADER  BLOCK 


DATA  BLOCK 


HEADER  BLOCK 


DATA  BLOCK 


HEADER  BLOCK 


=  sync  mark 


inter-sec  gap 


The  sectors  are  recorded  in  numerical  sequence  along  the  circular  track.  Each  sector 
consists  of  an  identifying  header  block  followed  by  a  data  block.  The  sectors  are  separated 
from  each  other  by  an  inter-record  gap.  A  special  character  called  a  SYNC  MARK  is 
used  to  mark  the  beginning  of  each  header  or  data  block. 


31 


A  SYNC  MARK  is  a  very  special  character.  It  consists  of  10  or  more  1  bits  in  a  row 
(normally  40  of  them).  This  particular  pattern  of  bits  only  occurs  at  the  start  of  a  header 
or  data  block.  The  hardware  in  the  1541  drive  can  detect  this  character  and  signal  the 
DOS  that  a  new  data  or  header  block  is  coming. 

If  you  are  puzzled  about  why  several  $FF  characters  in  a  row  in  the  data  block  are 
not  interpreted  as  a  sync  character,  you  may  want  to  skip  ahead  to  the  section  on  Com- 
modore's GCR  encoding  scheme  in  Chapter  7. 



---
Additional information can be found by searching:
- "header_block_structure_and_fields" which expands on header block byte-by-byte description
- "data_block_structure_and_fields" which expands on data block fields, checksums, off bytes, and tail gap
