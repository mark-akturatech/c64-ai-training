# byRiclianll - Recovering after a short NEW (section 8.8): a short NEW zeros the BAM and sector 1 of track 18. Steps: run EDIT TRACK & SECTOR, call up track 18 sector 1 and change the forward track/sector pointer from 00,FF to 12,04. Then load and list the directoryâ€”if disk had more than eight active files, only the first eight are lost and the remaining will display; do not VALIDATE (directory sectors won't be reallocated). Copy remaining files to a new disk. If you need to recover the first eight files, reconstruct starting track/sector locations by making a sector grid, VALIDATE original diskette, run DISPLAY A BLOCK AVAILABILITY MAP (Appendix C) to mark used sectors, then run DISPLAY A CHAIN to find chains beginning near track 17/19 and work outward from track 18; after locating starting locations, use EDIT TRACK & SECTOR to reconstruct track 18 sector 1 using your discovered starting locations, then copy the eight files to another disk.

8.8  Recovering  from  a  Short  New 

If  you  have  inadvertently  performed  a  short  NEW  on  a  diskette,  there  is  more  hope 
than  you  think.  Recall  that  a  short  NEW  only  zeros  out  the  BAM  and  sector  1  from 
track  18.  Run  the  EDIT  TRACK  &  SECTOR  program  on  the  diskette  in  question.  Call 
up  track  18,  sector  1  and  change  the  forward  track  and  sector  pointer  from  a  00,  FF 
to  a  12,  04. 


Next,  load  and  list  the  directory.  If  your  diskette  contained  more  than  eight  active  files, 
all  but  the  first  eight  files  will  be  displayed  on  the  screen.  (The  first  eight  files  have 
been  lost  for  now.)  Do  not  attempt  to  VALIDATE  the  diskette  because  the  directory 
sectors  will  not  be  reallocated.  Copy  all  of  the  remaining  files  onto  a  new  diskette. 


If  the  first  eight  files  are  very  important,  you  can  attempt  to  recover  them  as  well. 
However,  it  will  not  be  easy!  You  must  find  the  starting  track  and  sector  locations  of 
these  files  yourself  through  a  process  of  elimination.  Begin  by  making  a  grid  with  a  space 
for  each  sector  on  the  diskette  like  this: 


178 


TRACK 

1       2       3       4       5       6  7 


SECTOR 


Next,  VALIDATE  the  original  diskette  and  then  load  and  run  the  program  DISPLAY 
A  BLOCK  AVAILABILITY  MAP  listed  in  Appendix  C.  Working  from  the  display  on 
the  CRT,  indicate  on  your  chart  which  sectors  are  in  use  by  other  files.  Once  you  have 
done  this,  you  should  see  a  blank  area  centered  around  track  18.  This  is  where  you  lost 
files  reside. 


Now,  load  and  run  the  DISPLAY  A  CHAIN  program.  The  first  file  probably  starts 
on  track  17,  sector  0.  Record  the  chain  displayed  to  the  screen  on  your  chart.  Once  you 
have  recorded  the  first  chain,  begin  looking  for  the  next  one.  It  probably  begins  on  an 
open  space  on  track  17  or,  if  the  first  chain  was  a  long  one,  on  track  19,  sector  0.  Work 
outward  from  track  18  until  you  have  located  all  eight  missing  files. 

Once  you  have  the  starting  track  and  sector  locations  for  the  files,  use  the  EDIT  TRACK 
&  SECTOR  program  to  reconstruct  track  18,  sector  1.  The  tables  and  hex  dumps  from 
Chapter  4  can  be  used  as  a  guide.  Be  sure  to  substitute  the  starting  track  and  sector 
locations  that  you  found  and  not  the  ones  in  this  manual. 

Now  copy  the  eight  files  onto  another  disk.  Once  this  is  done,  take  a  break  and  meditate 
on  the  virtues  of  archival  backups! 



---
Additional information can be found by searching:
- "track18_directory_sector_table" which expands on When reconstructing track 18 sector 1, consult the tables and hex dumps (Chapter 4) and substitute found starting locations
- "recovering_entire_diskette" which expands on After reconstructing directory pointers, copy recovered files to a new disk as in entire-diskette recovery
