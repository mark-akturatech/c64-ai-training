# CA65 Assembler - Control Commands (.DBYT .DEBUGINFO .DEFINE .DELMACRO .DESTRUCTOR .DWORD .ELSE .END .ENDIF .ENDMACRO .ENDPROC .ENDSCOPE)

11.23 .ELSE
Conditional assembly: Reverse the current condition.

11.24 .ELSEIF
Conditional assembly: Reverse current condition and test a new one.

11.25 .END
Forced end of assembly. Assembly stops at this point, even if the command is read from an include file.

11.26 .ENDENUM
End a .ENUM declaration.

11.27 .ENDIF
Conditional assembly: Close a .IF... or .ELSE branch.

11.28 .ENDMAC, .ENDMACRO
Marks the end of a macro definition. Note, .ENDMACRO should be on its own line to successfully end the macro definition. It is possible to use .DEFINE to create a symbol that references .ENDMACRO without ending the macro definition.

Example:


        .macro  new_mac
                .define startmac .macro
                .define endmac .endmacro
        .endmacro
  
See: .DELMACRO, .EXITMACRO, .MACRO

See also section Macros.

11.29 .ENDPROC
End of the local lexical level (see .PROC).

11.30 .ENDREP, .ENDREPEAT
End a .REPEAT block.

11.31 .ENDSCOPE
End of the local lexical level (see .SCOPE).

11.32 .ENDSTRUCT
Ends a struct definition. See the .STRUCT command and the separate section named "Structs and unions".

11.33 .ENDUNION
Ends a union definition. See the .UNION command and the separate section named "Structs and unions".

11.34 .ENUM
Start an enumeration. This directive is very similar to the C enum keyword. If a name is given, a new scope is created for the enumeration, otherwise the enumeration members are placed in the enclosing scope.

In the enumeration body, symbols are declared. The first symbol has a value of zero, and each following symbol will get the value of the preceding, plus one. That behaviour may be overridden by an explicit assignment. Two symbols may have the same value.

Example:


        .enum   errorcodes
                no_error
                file_error
                parse_error
        .endenum
  
The above example will create a new scope named errorcodes with three symbols in it that get the values 0, 1, and 2 respectively. Another way to write that would have been:


        .scope  errorcodes
                no_error        = 0
                file_error      = 1
                parse_error     = 2
        .endscope
  
Please note that explicit scoping must be used to access the identifiers:


        .word   errorcodes::no_error
  
A more complex example:


        .enum
                EUNKNOWN        = -1
                EOK
                EFILE
                EBUSY
                EAGAIN
                EWOULDBLOCK     = EAGAIN
        .endenum
  
In that example, the enumeration does not have a name, which means that the members will be visible in the enclosing scope, and can be used in that scope without explicit scoping. The first member (EUNKNOWN) has the value -1. The values for the following members are incremented by one; so, EOK would be zero, and so on. EWOULDBLOCK is an alias for EAGAIN; so, it has an override for the value, using an already defined symbol.

11.35 .ERROR
Force an assembly error. The assembler will output an error message preceded by "User error". Assembly is continued but no object file will generated.

This command may be used to check for initial conditions that must be set before assembling a source file.

Example:


        .if     foo = 1
        ...
        .elseif bar = 1
        ...
        .else
        .error  "Must define foo or bar!"
        .endif
  
See also: .FATAL, .OUT, .WARNING

11.36 .EXITMAC, .EXITMACRO
Abort a macro expansion immediately. This command is often useful in recursive macros.

See: .DELMACRO, .ENDMACRO, .MACRO

See also section Macros.

