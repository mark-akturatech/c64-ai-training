# COMMODORE 64 - GETIN: low-level get-a-character routine. Includes purpose, call address ($FFE4 / 65508), communication register (A), preparatory routines (CHKIN, OPEN), stack/register requirements, behavior for keyboard channel (removes one char from keyboard queue, returns ASCII in A, returns zero if queue empty, keyboard queue fed by interrupt-driven scan up to 10 characters), behavior for RS-232 (single character in A), and usage example showing a loop waiting until a non-zero character is returned.

  B-11. Function Name: GETIN


    Purpose: Get a character
    Call address: $FFE4 (hex) 65508 (decimal)
    Communication registers: A
    Preparatory routines: CHKIN, OPEN
    Error returns: See READST
    Stack requirements: 7+
    Registers affected: A (X, Y)

    Description: If the channel is the keyboard, this subroutine removes
  one character from the keyboard queue and returns it as an ASCII value in
  the accumulator. If the queue is empty, the value returned in the
  accumulator will be zero. Characters are put into the queue automatically
  by an interrupt driven keyboard scan routine which calls the SCNKEY
  routine. The keyboard buffer can hold up to ten characters. After the
  buffer is filled, additional characters are ignored until at least one
  character has been removed from the queue. If the channel is RS-232, then
  only the A register is used and a single character is returned. See
  READST to check validity. If the channel is serial, cassette, or screen,
  call BASIN routine.


  How to Use:

    1) Call this routine using a JSR instruction.
    2) Check for a zero in the accumulator (empty buffer).
    3) Process the data.


  EXAMPLE:

         ;WAIT FOR A CHARACTER
    WAIT JSR GETIN
         CMP #0
         BEQ WAIT






                                            BASIC TO MACHINE LANGUAGE   283
~



---
Additional information can be found by searching:
- "chrin_get_character_from_input_channel" which expands on CHRIN retrieves characters from the current input channel (higher-level handling of keyboard lines) whereas GETIN directly reads the keyboard queue
- "iobase_define_io_memory_page" which expands on IOBASE can be used to find RS-232 and other I/O page locations referenced by GETIN
