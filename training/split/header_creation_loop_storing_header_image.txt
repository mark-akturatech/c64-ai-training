# byRiclianll - Assembly code that builds in-memory sector ID/header images at $0300 (indexed by X). Starts with LDX #*00, then a loop labeled HEADER that loads header bytes and stores them to *0300,X: LDA #*09 (HBID) stored to $0300,X, increments of X, loading/storing the checksum byte from *0628, loading the sector number from *51 into $0300,X, loading/storing a zero track byte (#*00) to $0300,X, storing ID low and then ID high (with a subsequent LDA #*0F). The listing ends within/after this header-creation sequence (trailing lines contain the final immediate value and listing terminators).

410 

LDX 

#*00 

420 

HEADER  LDA  #*09 

HBID 

430 

STA 

*0300, X 

440 

INX 

450 

INX 

5 

CHECKSUM 

460 

LDA 

*0628 

470 

STA 

*0300, X 

5 

SECTOR 

480 

INX 

490 

LDA 

*51 

500 

STA 

*0300, X 

5 

TRACK 

510 

INX 

520 

LDA 

#*oo 

530 

STA 

*0300, X 

IDL 

540 

INX 

550 

STA 

*0300, X 

IDH 

560 

INX 

570 

LDA 

#*0F 

147 


580 
590 
600 
610 

---
Additional information can be found by searching:
- "sector_counter_jsr_and_led_on_create_headers_label" which expands on the CREATE HEADERS label at the end of that chunk begins this loop
