# - Fully Commented Commodore 64 KERNAL ROM Disassembly (English, "CBM") - ZZZ - Return cassette buffer pointer: loads the cassette buffer pointer from TAPE1 (LDX TAPE1, LDY TAPE1+1). Checks allocation state by comparing TAPE1+1 against #$02: a value of 0 or 1 indicates the buffer is de-allocated (CPY #$02; callers branch on carry/zero flags). Returns with X/Y holding the pointer bytes.

                                ;FUNCTION TO RETURN TAPE BUFFER
                                ;ADDRESS IN TAPE1
                                ;
.,F7D0 A6 B2    LDX $B2         ZZZ    LDX TAPE1       ;ASSUME TAPE1
.,F7D2 A4 B3    LDY $B3         LDY    TAPE1+1
.,F7D4 C0 02    CPY #$02        CPY    #>BUF           ;CHECK FOR ALLOCATION...
                                ;...[TAPE1+1]=0 OR 1 MEANS DEALLOCATED
                                ;...C CLR => DEALLOCATED
.,F7D6 60       RTS             RTS

---
Additional information can be found by searching:
- "ldad1_compute_start_end_addresses" which expands on called by LDAD1 to get the cassette pointer
- "tape_header_write_tapeh" which expands on called by TAPEH to verify the tape buffer is allocated
