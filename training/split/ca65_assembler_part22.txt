# CA65 Assembler - Control Commands (.BANKBYTES .BSS .BYTE .CASE)

11.12 .CHARMAP
Apply a custom mapping for characters for the commands .ASCIIZ and .BYTE. The command is followed by two numbers. The first one is the index of the source character (range 0..255); the second one is the mapping (range 0..255). The mapping applies to all character and string constants when they generate output; and, overrides a mapping table specified with the -t command line switch.

Example:

  .charmap        $41, $61        ; Map 'A' to 'a'
  
11.13 .CODE
Switch to the CODE segment. The name of the CODE segment is always "CODE", so this is a shortcut for


        .segment  "CODE"
  
See also the .SEGMENT command.

11.14 .CONDES
Export a symbol and mark it in a special way. The linker is able to build tables of all such symbols. This may be used to automatically create a list of functions needed to initialize linked library modules.

Note: The linker has a feature to build a table of marked routines, but it is your code that must call these routines, so just declaring a symbol with .CONDES does nothing by itself.

All symbols are exported as an absolute (16 bit) symbol. You don't need to use an additional .EXPORT statement, this is implied by .CONDES.

.CONDES is followed by the type, which may be constructor, destructor or a numeric value between 0 and 6 (where 0 is the same as specifying constructor and 1 is equal to specifying destructor). The .CONSTRUCTOR, .DESTRUCTOR and .INTERRUPTOR commands are actually shortcuts for .CONDES with a type of constructor resp. destructor or interruptor.

After the type, an optional priority may be specified. Higher numeric values mean higher priority. If no priority is given, the default priority of 7 is used. Be careful when assigning priorities to your own module constructors so they won't interfere with the ones in the cc65 library.

Example:


        .condes         ModuleInit, constructor
        .condes         ModInit, 0, 16
  
See the .CONSTRUCTOR, .DESTRUCTOR and .INTERRUPTOR commands and the separate section Module constructors/destructors explaining the feature in more detail.

11.15 .CONSTRUCTOR
Export a symbol and mark it as a module constructor. This may be used together with the linker to build a table of constructor subroutines that are called by the startup code.

Note: The linker has a feature to build a table of marked routines, but it is your code that must call these routines, so just declaring a symbol as constructor does nothing by itself.

A constructor is always exported as an absolute (16 bit) symbol. You don't need to use an additional .export statement, this is implied by .constructor. It may have an optional priority that is separated by a comma. Higher numeric values mean a higher priority. If no priority is given, the default priority of 7 is used. Be careful when assigning priorities to your own module constructors so they won't interfere with the ones in the cc65 library.

Example:


        .constructor    ModuleInit
        .constructor    ModInit, 16
  
See the .CONDES and .DESTRUCTOR commands and the separate section Module constructors/destructors explaining the feature in more detail.

11.16 .DATA
Switch to the DATA segment. The name of the DATA segment is always "DATA", so this is a shortcut for


        .segment  "DATA"
  
See also the .SEGMENT command.

