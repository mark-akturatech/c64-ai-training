# 6502 Multiplication and Division Algorithms - Source: llx.com - Mathematical trick to reduce table size using binomial identities: (a+b)^2 = a^2 + 2ab + b^2 and (a-b)^2 = a^2 - 2ab + b^2. Subtracting yields (a+b)^2 - (a-b)^2 = 4ab, so ab = ((a+b)^2 - (a-b)^2)/4 = (a+b)^2/4 - (a-b)^2/4. So multiplication can be computed with two table lookups of squares (predivided by 4), an addition and subtraction, and shifts.

Fortunately, with a little bit of algebra, the multiplcation table can
be made much smaller, at the cost of a little extra execution time.
Consider these two ways of writing the binomial equation:


(a + b)^2 = a^2 + 2*a*b + b^2,
(a - b)^2 = a^2 - 2*a*b + b^2.


If the bottom equation is subtracted from the top, we get


(a + b)^2 - (a - b)^2 = 4*a*b,


Or, rearranging,


a*b = ((a + b)^2 - (a - b)^2)/4
    = (a + b)^2/4 - (a - b)^2/4.



---
Additional information can be found by searching:
- "table_method_implementation_tricks" which expands on implementation details to make square-table method practical
- "pointer_setup_for_square_tables" which expands on how to set table pointers for efficient lookup
