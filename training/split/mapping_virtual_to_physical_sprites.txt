# Sprite Multiplexing Techniques by Cadaver (Lasse Oorni) - Mapping strategy: map virtual sprites (sorted top-to-bottom) cyclically onto the 8 physical sprites (1-8, then 1-8 again) so virtual 1..8 → physical 1..8, virtual 9→physical1, etc. Alternative mapping orders can implement priority classes (example: BOFH uses different search orders for LOW, MEDIUM, HIGH priorities). 'Free' physical sprite is one whose previous virtual sprite is sufficiently far away in Y (typically >= 21 pixels).

2.2 Mapping the "virtual" sprites to physical sprites

There really isn't much of a choice, the idea is to go round and round with the
physical sprites until all "virtual" sprites have been displayed. So, the
1st-8th virtual sprites (in sorted order) will go to physical sprites 1-8, then
virtual sprite 9 will again be mapped onto physical sprite 1, virtual sprite 10
to physical sprite 2 and so on.

Based on the priority you want for the sprites you can also reverse the
physical sprite order, so 1st virtual goes to 8th physical, 2nd virtual to 7th
physical etc.

This is an example of sprite mapping, something that could be happening in
Green Beret (first level.) There's the 2-sprite soldiers running around, the
player jumping in the air and a flamethrower left hanging in the air (1 sprite)

                          1
                4         2       3
              __5_____         ________
             /       6\       /     7
       _____/________8_\_____/______1__
      /           2            3
     /____________4____________5_______

BOFH:Servers Under Siege has a priority-based sprite mapping instead. This
is more complicated: if the sprite's priority class is LOW (bodies,
items) the sprite mapping loop tries to find a "free" physical sprite in this
order: 8,7,6,5,4,3,2,1. For MEDIUM priority (player, enemies) the order is
5,4,6,3,7,2,8,1 and for HIGH priority (fire, explosions) the order is
1,2,3,4,5,6,7,8. "Free" physical sprite means in this case one whose previous
virtual sprite is sufficiently far away from the new virtual sprite, in Y-
direction (practically, at least 21 pixels)


---
Additional information can be found by searching:
- "rejecting_ninth_sprite_on_row" which expands on how to reject sprites that would be the 9th on a rasterline
- "true_sprite_multiplexing_overview" which expands on mapping is a core part of general multiplexing
